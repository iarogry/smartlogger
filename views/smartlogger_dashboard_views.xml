<?xml version="1.0" encoding="utf-8"?>
<!-- –§–ê–ô–õ: views/smartlogger_dashboard_views.xml –¥–ª—è Odoo 17 -->

<odoo>
    <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–∞—à–±–æ—Ä–¥—É –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è–º–∏ –¥–ª—è Odoo 17 -->
    <record id="smartlogger_dashboard_view_form" model="ir.ui.view">
        <field name="name">smartlogger.dashboard.form</field>
        <field name="model">smartlogger.dashboard</field>
        <field name="arch" type="xml">
            <form string="–î–∞—à–±–æ—Ä–¥ SmartLogger" create="false" edit="false" delete="false">
                <header>
                    <button name="action_refresh_data" string="–û–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ" type="object" class="btn-primary"/>
                    <button name="%(action_sync_data_wizard)d" string="–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏" type="action" class="btn-secondary"/>
                    <button name="%(action_smartlogger_analytics)d" string="üÜï –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞" type="action" class="btn-info"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>üîã –î–∞—à–±–æ—Ä–¥ SmartLogger</h1>
                        <div class="oe_subtitle">
                            <p class="text-muted">–ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ –≤—Å—ñ—Ö —Å–æ–Ω—è—á–Ω–∏—Ö —Å—Ç–∞–Ω—Ü—ñ–π (Odoo 17)</p>
                        </div>
                    </div>

                    <!-- –û—Å–Ω–æ–≤–Ω—ñ KPI –≤ –∫—Ä–∞—Å–∏–≤—ã—Ö –∫–∞—Ä—Ç–æ—á–∫–∞—Ö -->
                    <div class="row mt-3">
                        <div class="col-lg-3 col-md-6">
                            <div class="card border-primary">
                                <div class="card-body text-center">
                                    <h4 class="card-title text-primary">
                                        <i class="fa fa-industry"></i>
                                        <field name="total_stations" readonly="1"/>
                                    </h4>
                                    <p class="card-text">–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–∞–Ω—Ü—ñ–π</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="card border-success">
                                <div class="card-body text-center">
                                    <h4 class="card-title text-success">
                                        <i class="fa fa-bolt"></i>
                                        <field name="total_capacity" readonly="1"/> –∫–í—Ç
                                    </h4>
                                    <p class="card-text">–ó–∞–≥–∞–ª—å–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="card border-warning">
                                <div class="card-body text-center">
                                    <h4 class="card-title text-warning">
                                        <i class="fa fa-flash"></i>
                                        <field name="current_total_power" readonly="1"/> –∫–í—Ç
                                    </h4>
                                    <p class="card-text">–ü–æ—Ç–æ—á–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="card border-info">
                                <div class="card-body text-center">
                                    <h4 class="card-title text-info">
                                        <i class="fa fa-battery-three-quarters"></i>
                                        <field name="daily_total_energy" readonly="1"/> –∫–í—Ç¬∑–≥–æ–¥
                                    </h4>
                                    <p class="card-text">–î–æ–±–æ–≤–∞ –µ–Ω–µ—Ä–≥—ñ—è</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ì—Ä—É–ø–∞ –æ—Å–Ω–æ–≤–Ω–∏—Ö –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤ -->
                    <group string="üìä –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
                        <group string="–û—Å–Ω–æ–≤–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏">
                            <field name="total_stations" readonly="1"
                                   widget="integer"
                                   decoration-bf="total_stations > 0"/>
                            <field name="total_capacity" readonly="1"
                                   widget="monetary"
                                   options="{'currency_field': False, 'field_digits': [16,2]}"/>
                        </group>
                        <group string="–ü–æ—Ç–æ—á–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏">
                            <field name="current_total_power" readonly="1"
                                   widget="monetary"
                                   options="{'currency_field': False, 'field_digits': [16,2]}"
                                   decoration-success="current_total_power > 0"
                                   decoration-muted="current_total_power == 0"/>
                            <field name="daily_total_energy" readonly="1"
                                   widget="monetary"
                                   options="{'currency_field': False, 'field_digits': [16,2]}"/>
                        </group>
                    </group>

                    <!-- –®–≤–∏–¥–∫—ñ –¥—ñ—ó –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–∏–º –¥–∏–∑–∞–π–Ω–æ–º –¥–ª—è Odoo 17 -->
                    <group string="üöÄ –®–≤–∏–¥–∫—ñ –¥—ñ—ó">
                        <div class="row">
                            <div class="col-md-4">
                                <button name="%(action_smartlogger_station)d"
                                        type="action"
                                        string="üè≠ –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç–∞–Ω—Ü—ñ—ó"
                                        class="btn btn-primary btn-lg btn-block"
                                        help="–í—ñ–¥–∫—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö —Å—Ç–∞–Ω—Ü—ñ–π"/>
                            </div>
                            <div class="col-md-4">
                                <button name="%(action_sync_data_wizard)d"
                                        type="action"
                                        string="üîÑ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ"
                                        class="btn btn-secondary btn-lg btn-block"
                                        help="–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º–∞—Å—Ç–µ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó"/>
                            </div>
                            <div class="col-md-4">
                                <button name="%(action_smartlogger_analytics)d"
                                        type="action"
                                        string="üìà –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ (üÜï)"
                                        class="btn btn-info btn-lg btn-block"
                                        help="–í—ñ–¥–∫—Ä–∏—Ç–∏ –ø–æ—Ç—É–∂–Ω—É –∞–Ω–∞–ª—ñ—Ç–∏–∫—É Odoo 17"/>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-4">
                                <button name="%(action_smartlogger_station_kanban)d"
                                        type="action"
                                        string="üóÇÔ∏è Kanban —Å—Ç–∞–Ω—Ü—ñ–π"
                                        class="btn btn-outline-primary btn-block"
                                        help="Kanban –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü—ñ–π"/>
                            </div>
                            <div class="col-md-4">
                                <button name="%(action_smartlogger_error_stations)d"
                                        type="action"
                                        string="‚ö†Ô∏è –°—Ç–∞–Ω—Ü—ñ—ó –∑ –ø–æ–º–∏–ª–∫–∞–º–∏"
                                        class="btn btn-outline-warning btn-block"
                                        help="–ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ñ —Å—Ç–∞–Ω—Ü—ñ—ó"/>
                            </div>
                            <div class="col-md-4">
                                <button name="%(action_smartlogger_config)d"
                                        type="action"
                                        string="‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API"
                                        class="btn btn-outline-secondary btn-block"
                                        help="–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è"/>
                            </div>
                        </div>
                    </group>

                    <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ –±–ª–æ–∫–∏ –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–∏–º –¥–∏–∑–∞–π–Ω–æ–º -->
                    <div class="alert alert-info mt-3" role="alert">
                        <h5 class="alert-heading">
                            <i class="fa fa-info-circle"></i> –ü—Ä–æ –¥–∞—à–±–æ—Ä–¥ SmartLogger
                        </h5>
                        <p><strong>–¶–µ–π –¥–∞—à–±–æ—Ä–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –∞–≥—Ä–µ–≥–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –≤—Å—ñ—Ö —Å—Ç–∞–Ω—Ü—ñ–π SmartLogger.</strong></p>
                        <p>–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—è –æ–∫—Ä–µ–º–∏–º–∏ —Ä–æ–∑–¥—ñ–ª–∞–º–∏ —Å—Ç–∞–Ω—Ü—ñ–π —Ç–∞ —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö.</p>
                        <hr>
                        <p class="mb-0">
                            <strong>üÜï –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≤ Odoo 17:</strong>
                            <br/>‚Ä¢ –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
                            <br/>‚Ä¢ –†–æ–∑—à–∏—Ä–µ–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∑ –≥—Ä–∞—Ñ—ñ–∫–∞–º–∏ —Ç–∞ –∑–≤–µ–¥–µ–Ω–∏–º–∏ —Ç–∞–±–ª–∏—Ü—è–º–∏
                            <br/>‚Ä¢ –ö—Ä–∞—â—ñ –≤—ñ–∑—É–∞–ª—å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —Ç–∞ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
                            <br/>‚Ä¢ –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –º–æ–±—ñ–ª—å–Ω–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å
                        </p>
                        </hr>
                    </div>

                    <!-- –°–∏—Å—Ç–µ–º–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
                    <div class="alert alert-success mt-3" role="alert">
                        <h6 class="alert-heading">
                            <i class="fa fa-cogs"></i> –°–∏—Å—Ç–µ–º–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
                        </h6>
                        <div class="row">
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <strong>–í–µ—Ä—Å—ñ—è –º–æ–¥—É–ª—è:</strong> 17.0.2.0.0<br/>
                                    <strong>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> Odoo 17 Community/Enterprise<br/>
                                    <strong>API:</strong> Huawei FusionSolar Northbound
                                </small>
                            </div>
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <strong>–ê–≤—Ç–æ—Ä:</strong> –Ø—Ä–æ—Å–ª–∞–≤ –ì—Ä–∏—à–∏–Ω / HD Group LLC<br/>
                                    <strong>–í–µ–±-—Å–∞–π—Ç:</strong> https://www.hlibodar.com.ua<br/>
                                    <strong>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞:</strong> –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞
                                </small>
                            </div>
                        </div>
                    </div>

                    <!-- –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ (–¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –≤–µ—Ä—Å—ñ–π) -->
                    <div class="alert alert-light mt-3" role="alert" invisible="total_stations == 0">
                        <h6 class="alert-heading">
                            <i class="fa fa-chart-line"></i> –®–≤–∏–¥–∫—ñ –ø—ñ–¥—Å—É–º–∫–∏
                        </h6>
                        <div class="row">
                            <div class="col-md-3">
                                <small>
                                    <strong>–°–µ—Ä–µ–¥–Ω—è –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –Ω–∞ —Å—Ç–∞–Ω—Ü—ñ—é:</strong><br/>
                                    <span class="text-primary">
                                        <t t-if="total_stations > 0">
                                            <t t-esc="round(current_total_power / total_stations, 2)"/> –∫–í—Ç
                                        </t>
                                        <t t-else="">0 –∫–í—Ç</t>
                                    </span>
                                </small>
                            </div>
                            <div class="col-md-3">
                                <small>
                                    <strong>–ó–∞–≥–∞–ª—å–Ω–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:</strong><br/>
                                    <span class="text-success">
                                        <t t-if="total_capacity > 0">
                                            <t t-esc="round((current_total_power / total_capacity) * 100, 1)"/>%
                                        </t>
                                        <t t-else="">0%</t>
                                    </span>
                                </small>
                            </div>
                            <div class="col-md-3">
                                <small>
                                    <strong>–°–µ—Ä–µ–¥–Ω—è –¥–æ–±–æ–≤–∞ –µ–Ω–µ—Ä–≥—ñ—è:</strong><br/>
                                    <span class="text-info">
                                        <t t-if="total_stations > 0">
                                            <t t-esc="round(daily_total_energy / total_stations, 2)"/> –∫–í—Ç¬∑–≥–æ–¥
                                        </t>
                                        <t t-else="">0 –∫–í—Ç¬∑–≥–æ–¥</t>
                                    </span>
                                </small>
                            </div>
                            <div class="col-md-3">
                                <small>
                                    <strong>–°—Ç–∞—Ç—É—Å:</strong><br/>
                                    <span class="badge badge-success" invisible="current_total_power == 0">
                                        –ê–∫—Ç–∏–≤–Ω—ñ —Å—Ç–∞–Ω—Ü—ñ—ó
                                    </span>
                                    <span class="badge badge-secondary" invisible="current_total_power != 0">
                                        –ù–µ–∞–∫—Ç–∏–≤–Ω—ñ —Å—Ç–∞–Ω—Ü—ñ—ó
                                    </span>
                                </small>
                            </div>
                        </div>
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <!-- –î–æ–¥–∞—Ç–∫–æ–≤–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–∞—à–±–æ—Ä–¥—É –≤ —Ä–µ–∂–∏–º—ñ kanban (–Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è) -->
    <record id="smartlogger_dashboard_view_kanban" model="ir.ui.view">
        <field name="name">smartlogger.dashboard.kanban</field>
        <field name="model">smartlogger.dashboard</field>
        <field name="arch" type="xml">
            <kanban create="false" edit="false" delete="false">
                <field name="total_stations"/>
                <field name="total_capacity"/>
                <field name="current_total_power"/>
                <field name="daily_total_energy"/>

                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card">
                            <div class="oe_kanban_content">
                                <div class="row">
                                    <div class="col-12 text-center">
                                        <h3 class="mb-3">üîã SmartLogger Dashboard</h3>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 text-center border-right">
                                        <h4 class="text-primary">
                                            <t t-esc="record.total_stations.value"/>
                                        </h4>
                                        <small class="text-muted">–°—Ç–∞–Ω—Ü—ñ–π</small>
                                    </div>
                                    <div class="col-6 text-center">
                                        <h4 class="text-success">
                                            <t t-esc="record.total_capacity.value"/> –∫–í—Ç
                                        </h4>
                                        <small class="text-muted">–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å</small>
                                    </div>
                                </div>

                                <hr/>

                                <div class="row">
                                    <div class="col-6 text-center border-right">
                                        <h5 class="text-warning">
                                            <t t-esc="record.current_total_power.value"/> –∫–í—Ç
                                        </h5>
                                        <small class="text-muted">–ü–æ—Ç–æ—á–Ω–∞</small>
                                    </div>
                                    <div class="col-6 text-center">
                                        <h5 class="text-info">
                                            <t t-esc="record.daily_total_energy.value"/> –∫–í—Ç¬∑–≥–æ–¥
                                        </h5>
                                        <small class="text-muted">–°—å–æ–≥–æ–¥–Ω—ñ</small>
                                    </div>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-12 text-center">
                                        <t t-if="record.total_capacity.value > 0">
                                            <div class="progress">
                                                <div class="progress-bar bg-success"
                                                     t-att-style="'width: ' + Math.min((record.current_total_power.value / record.total_capacity.value) * 100, 100) + '%'">
                                                </div>
                                            </div>
                                            <small class="text-muted">
                                                –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å: <t t-esc="Math.round((record.current_total_power.value / record.total_capacity.value) * 100)"/>%
                                            </small>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- –û–Ω–æ–≤–ª–µ–Ω–∞ –¥—ñ—è –¥–ª—è –¥–∞—à–±–æ—Ä–¥—É –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—å -->
    <record id="action_smartlogger_dashboard" model="ir.actions.act_window">
        <field name="name">–î–∞—à–±–æ—Ä–¥ SmartLogger</field>
        <field name="res_model">smartlogger.dashboard</field>
        <field name="view_mode">form,kanban</field>
        <field name="target">current</field>
        <field name="context">{'dashboard_mode': True}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ –¥–∞—à–±–æ—Ä–¥—É SmartLogger (Odoo 17)!
            </p>
            <p>
                –¶–µ–π –¥–∞—à–±–æ—Ä–¥ –Ω–∞–¥–∞—î –ø–æ–≤–Ω–∏–π –æ–≥–ª—è–¥ –≤–∞—à–æ—ó —Å–∏—Å—Ç–µ–º–∏ —Å–æ–Ω—è—á–Ω–∏—Ö —Å—Ç–∞–Ω—Ü—ñ–π –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é Huawei FusionSolar API.
            </p>
            <p>
                <strong>üÜï –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ Odoo 17:</strong>
            </p>
            <ul>
                <li><strong>–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:</strong> –®–≤–∏–¥—à–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥</li>
                <li><strong>–†–æ–∑—à–∏—Ä–µ–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞:</strong> –ü–æ—Ç—É–∂–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∞–Ω–∞–ª—ñ–∑—É –¥–∞–Ω–∏—Ö</li>
                <li><strong>–ö—Ä–∞—â–∏–π UX:</strong> –Ü–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–π —Ç–∞ —Å—É—á–∞—Å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å</li>
                <li><strong>–ú–æ–±—ñ–ª—å–Ω–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å:</strong> –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –≤—Å—ñ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤</li>
            </ul>
            <p>
                –ü–æ—á–Ω—ñ—Ç—å –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Ç–∞ –∑–∞–ø—É—Å–∫—É –ø–µ—Ä—à–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó!
            </p>
        </field>
    </record>
</odoo>