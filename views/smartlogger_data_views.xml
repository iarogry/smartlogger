<?xml version="1.0" encoding="utf-8"?>
<!-- –§–ê–ô–õ: views/smartlogger_data_views.xml –¥–ª—è Odoo 17 -->

<odoo>
    <!-- –î–µ—Ä–µ–≤–æ –¥–ª—è —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö KPI –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è–º–∏ –¥–ª—è Odoo 17 -->
    <record id="smartlogger_data_view_tree" model="ir.ui.view">
        <field name="name">smartlogger.data.tree</field>
        <field name="model">smartlogger.data</field>
        <field name="arch" type="xml">
            <tree string="–Ü—Å—Ç–æ—Ä–∏—á–Ω—ñ –¥–∞–Ω—ñ KPI"
                  create="false"
                  edit="false"
                  delete="false"
                  export_xlsx="true"
                  decoration-success="current_power > 50"
                  decoration-warning="current_power > 0 and current_power &lt;= 50"
                  decoration-muted="current_power == 0">

                <field name="timestamp" width="150px"/>
                <field name="station_id" width="200px"/>
                <field name="current_power" width="120px"
                       decoration-bf="current_power > 0"/>
                <field name="daily_energy" width="120px"/>
                <field name="monthly_energy" width="130px" optional="hide"/>
                <field name="yearly_energy" width="120px" optional="hide"/>
                <field name="lifetime_energy" width="130px" optional="hide"/>

                <!-- –î–æ–¥–∞—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É —Å—É–º—É –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤ Odoo 17 -->
                <field name="id" column_invisible="1"/>
            </tree>
        </field>
    </record>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö KPI –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è–º–∏ –¥–ª—è Odoo 17 -->
    <record id="smartlogger_data_view_form" model="ir.ui.view">
        <field name="name">smartlogger.data.form</field>
        <field name="model">smartlogger.data</field>
        <field name="arch" type="xml">
            <form string="–î–∞–Ω—ñ KPI" create="false" edit="false" delete="false">
                <sheet>
                    <div class="oe_title">
                        <h1>–î–∞–Ω—ñ KPI —Å—Ç–∞–Ω—Ü—ñ—ó</h1>
                        <h3><field name="station_id" readonly="1"/></h3>
                    </div>

                    <group>
                        <group string="–û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è">
                            <field name="timestamp" readonly="1"/>
                            <field name="current_power" readonly="1"/>
                        </group>
                        <group string="–ü–æ–∫–∞–∑–Ω–∏–∫–∏ –µ–Ω–µ—Ä–≥—ñ—ó">
                            <field name="daily_energy" readonly="1"/>
                            <field name="monthly_energy" readonly="1"/>
                            <field name="yearly_energy" readonly="1"/>
                            <field name="lifetime_energy" readonly="1"/>
                        </group>
                    </group>

                    <!-- –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –¥–ª—è Odoo 17 -->
                    <group string="–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="o_field_widget">
                                    <span class="o_form_label">–°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó</span>
                                    <div class="o_field_value">
                                        <span class="badge badge-success" invisible="current_power == 0">
                                            –ì–µ–Ω–µ—Ä—É—î –µ–Ω–µ—Ä–≥—ñ—é
                                        </span>
                                        <span class="badge badge-secondary" invisible="current_power != 0">
                                            –ù–µ –≥–µ–Ω–µ—Ä—É—î
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="o_field_widget">
                                    <span class="o_form_label">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ</span>
                                    <div class="o_field_value">
                                        <span class="badge badge-success" invisible="current_power &lt;= 50">
                                            –í–∏—Å–æ–∫–∞ (&gt; 50 –∫–í—Ç)
                                        </span>
                                        <span class="badge badge-warning" invisible="current_power == 0 or current_power > 50">
                                            –ü–æ–º—ñ—Ä–Ω–∞ (1-50 –∫–í—Ç)
                                        </span>
                                        <span class="badge badge-secondary" invisible="current_power != 0">
                                            –ù—É–ª—å–æ–≤–∞
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </group>

                    <div class="alert alert-info mt-3" role="alert">
                        <p><strong>–ü—Ä–∏–º—ñ—Ç–∫–∞ (Odoo 17):</strong> –¶—ñ –¥–∞–Ω—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥ —á–∞—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑ Huawei FusionSolar API.</p>
                        <p>–î–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—è —Ñ—É–Ω–∫—Ü—ñ—î—é —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –≤ —Ä–æ–∑–¥—ñ–ª—ñ "–û–ø–µ—Ä–∞—Ü—ñ—ó".</p>
                        <p><strong>–ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:</strong> –¢–µ–ø–µ—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç —É Excel —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞!</p>
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <!-- –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –ø–æ—à—É–∫ –¥–ª—è Odoo 17 -->
    <record id="smartlogger_data_view_search" model="ir.ui.view">
        <field name="name">smartlogger.data.search</field>
        <field name="model">smartlogger.data</field>
        <field name="arch" type="xml">
            <search string="–ü–æ—à—É–∫ –¥–∞–Ω–∏—Ö KPI">
                <field name="station_id" string="–°—Ç–∞–Ω—Ü—ñ—è"/>
                <field name="timestamp" string="–î–∞—Ç–∞/—á–∞—Å"/>
                <field name="current_power" string="–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å"/>

                <!-- –®–≤–∏–¥–∫—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ –¥–ª—è —á–∞—Å—É -->
                <filter name="today" string="–°—å–æ–≥–æ–¥–Ω—ñ"
                        domain="[('timestamp', '>=', context_today()),
                                 ('timestamp', '&lt;', (context_today() + datetime.timedelta(days=1)).strftime('%Y-%m-%d'))]"/>
                <filter name="yesterday" string="–í—á–æ—Ä–∞"
                        domain="[('timestamp', '>=', (context_today() - datetime.timedelta(days=1)).strftime('%Y-%m-%d')),
                                 ('timestamp', '&lt;', context_today())]"/>
                <filter name="this_week" string="–¶–µ–π —Ç–∏–∂–¥–µ–Ω—å"
                        domain="[('timestamp', '>=', (context_today() - datetime.timedelta(days=context_today().weekday())).strftime('%Y-%m-%d')),
                                 ('timestamp', '&lt;', (context_today() + datetime.timedelta(days=7-context_today().weekday())).strftime('%Y-%m-%d'))]"/>
                <filter name="this_month" string="–¶–µ–π –º—ñ—Å—è—Ü—å"
                        domain="[('timestamp', '>=', context_today().replace(day=1))]"/>
                <filter name="last_month" string="–ú–∏–Ω—É–ª–∏–π –º—ñ—Å—è—Ü—å"
                        domain="[('timestamp', '>=', (context_today().replace(day=1) - datetime.timedelta(days=1)).replace(day=1)),
                                 ('timestamp', '&lt;', context_today().replace(day=1))]"/>

                <separator/>

                <!-- –§—ñ–ª—å—Ç—Ä–∏ –∑–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—é -->
                <filter name="high_power" string="–í–∏—Å–æ–∫–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (&gt; 50 –∫–í—Ç)"
                        domain="[('current_power', '>', 50)]"/>
                <filter name="medium_power" string="–ü–æ–º—ñ—Ä–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (10-50 –∫–í—Ç)"
                        domain="[('current_power', '>=', 10), ('current_power', '&lt;=', 50)]"/>
                <filter name="low_power" string="–ù–∏–∑—å–∫–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (1-10 –∫–í—Ç)"
                        domain="[('current_power', '>=', 1), ('current_power', '&lt;', 10)]"/>
                <filter name="zero_power" string="–ù—É–ª—å–æ–≤–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å"
                        domain="[('current_power', '=', 0)]"/>

                <separator/>

                <!-- –§—ñ–ª—å—Ç—Ä–∏ –∑–∞ –µ–Ω–µ—Ä–≥—ñ—î—é -->
                <filter name="high_daily_energy" string="–í–∏—Å–æ–∫–∞ –¥–æ–±–æ–≤–∞ –µ–Ω–µ—Ä–≥—ñ—è (&gt; 100 –∫–í—Ç¬∑–≥–æ–¥)"
                        domain="[('daily_energy', '>', 100)]"/>
                <filter name="has_energy" string="–Ñ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –µ–Ω–µ—Ä–≥—ñ—ó"
                        domain="[('daily_energy', '>', 0)]"/>

                <separator/>

                <!-- –§—ñ–ª—å—Ç—Ä–∏ –∑–∞ –ø–µ—Ä—ñ–æ–¥–æ–º –¥–Ω—è (–Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è Odoo 17) -->
                <filter name="morning" string="–†–∞–Ω–æ–∫ (6-12)"
                        domain="[('timestamp', '>=', datetime.datetime.combine(context_today(), datetime.time(6,0,0))),
                                 ('timestamp', '&lt;', datetime.datetime.combine(context_today(), datetime.time(12,0,0)))]"/>
                <filter name="afternoon" string="–î–µ–Ω—å (12-18)"
                        domain="[('timestamp', '>=', datetime.datetime.combine(context_today(), datetime.time(12,0,0))),
                                 ('timestamp', '&lt;', datetime.datetime.combine(context_today(), datetime.time(18,0,0)))]"/>
                <filter name="evening" string="–í–µ—á—ñ—Ä (18-22)"
                        domain="[('timestamp', '>=', datetime.datetime.combine(context_today(), datetime.time(18,0,0))),
                                 ('timestamp', '&lt;', datetime.datetime.combine(context_today(), datetime.time(22,0,0)))]"/>

                <group expand="0" string="–ì—Ä—É–ø—É–≤–∞—Ç–∏ –∑–∞">
                    <filter name="group_by_station" string="–°—Ç–∞–Ω—Ü—ñ—î—é"
                            context="{'group_by': 'station_id'}"/>
                    <filter name="group_by_date" string="–î–∞—Ç–æ—é"
                            context="{'group_by': 'timestamp:day'}"/>
                    <filter name="group_by_week" string="–¢–∏–∂–Ω–µ–º"
                            context="{'group_by': 'timestamp:week'}"/>
                    <filter name="group_by_month" string="–ú—ñ—Å—è—Ü–µ–º"
                            context="{'group_by': 'timestamp:month'}"/>
                    <filter name="group_by_year" string="–†–æ–∫–æ–º"
                            context="{'group_by': 'timestamp:year'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- –ì—Ä–∞—Ñ—ñ—á–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è Odoo 17 -->
    <record id="smartlogger_data_view_graph" model="ir.ui.view">
        <field name="name">smartlogger.data.graph</field>
        <field name="model">smartlogger.data</field>
        <field name="arch" type="xml">
            <graph string="–ì—Ä–∞—Ñ—ñ–∫ KPI –¥–∞–Ω–Ω–∏—Ö" type="line" sample="1">
                <field name="timestamp" type="row" interval="hour"/>
                <field name="current_power" type="measure"/>
                <field name="daily_energy" type="measure"/>
                <field name="station_id" type="col"/>
            </graph>
        </field>
    </record>

    <!-- Pivot –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ –≤ Odoo 17 -->
    <record id="smartlogger_data_view_pivot" model="ir.ui.view">
        <field name="name">smartlogger.data.pivot</field>
        <field name="model">smartlogger.data</field>
        <field name="arch" type="xml">
            <pivot string="–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ KPI –¥–∞–Ω–Ω–∏—Ö" sample="1">
                <field name="station_id" type="row"/>
                <field name="timestamp" type="col" interval="day"/>
                <field name="current_power" type="measure"/>
                <field name="daily_energy" type="measure"/>
                <field name="monthly_energy" type="measure"/>
            </pivot>
        </field>
    </record>

    <!-- –ö–∞–Ω–±–∞–Ω –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—Ü—ñ–π –∑ –¥–∞–Ω–Ω—ã–º–∏ (–Ω–æ–≤–∞ —Ñ—É–Ω—Ü—ñ—è Odoo 17) -->
    <record id="smartlogger_data_view_kanban" model="ir.ui.view">
        <field name="name">smartlogger.data.kanban</field>
        <field name="model">smartlogger.data</field>
        <field name="arch" type="xml">
            <kanban default_group_by="station_id" quick_create="false">
                <field name="station_id"/>
                <field name="timestamp"/>
                <field name="current_power"/>
                <field name="daily_energy"/>

                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card">
                            <div class="oe_kanban_content">
                                <div class="row">
                                    <div class="col-12">
                                        <strong><t t-esc="record.timestamp.value"/></strong>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-6">
                                        <strong><t t-esc="record.current_power.value"/> –∫–í—Ç</strong><br/>
                                        <span class="text-muted">–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å</span>
                                    </div>
                                    <div class="col-6">
                                        <strong><t t-esc="record.daily_energy.value"/> –∫–í—Ç¬∑–≥–æ–¥</strong><br/>
                                        <span class="text-muted">–ï–Ω–µ—Ä–≥—ñ—è</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏ -->
    <record id="action_smartlogger_data" model="ir.actions.act_window">
        <field name="name">–Ü—Å—Ç–æ—Ä–∏—á–Ω—ñ –¥–∞–Ω—ñ KPI</field>
        <field name="res_model">smartlogger.data</field>
        <field name="view_mode">tree,graph,pivot,kanban,form</field>
        <field name="context">{'group_by': 'station_id'}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                –¢—É—Ç –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è —ñ—Å—Ç–æ—Ä–∏—á–Ω—ñ –¥–∞–Ω—ñ KPI –≤–∞—à–∏—Ö —Å—Ç–∞–Ω—Ü—ñ–π (Odoo 17)
            </p>
            <p>
                –î–∞–Ω—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–∏—Ä–∞—é—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑ Huawei FusionSolar API.<br/>
                –Ø–∫—â–æ –¥–∞–Ω—ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
            </p>
            <ul>
                <li>–ß–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ —Å—Ç–∞–Ω—Ü—ñ—ó –≤ —Ä–æ–∑–¥—ñ–ª—ñ "–°—Ç–∞–Ω—Ü—ñ—ó"</li>
                <li>–ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ API –≤ "–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è > –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API"</li>
                <li>–ß–∏ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∞–±–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å —ó—ó –≤—Ä—É—á–Ω—É –≤ "–û–ø–µ—Ä–∞—Ü—ñ—ó > –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∑–∞—Ä–∞–∑"</li>
            </ul>
            <p>
                <strong>üÜï –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≤ Odoo 17:</strong>
            </p>
            <ul>
                <li><strong>–ì—Ä–∞—Ñ—ñ—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑:</strong> –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ —Ç—Ä–µ–Ω–¥—ã —É –≤–∫–ª–∞–¥—Ü—ñ "–ì—Ä–∞—Ñ—ñ–∫"</li>
                <li><strong>–ó–≤–µ–¥–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è:</strong> –ê–Ω–∞–ª—ñ–∑—É–π—Ç–µ –¥–∞–Ω—ñ —É –≤–∫–ª–∞–¥—Ü—ñ "–ó–≤–µ–¥–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è"</li>
                <li><strong>Kanban –ø–µ—Ä–µ–≥–ª—è–¥:</strong> –®–≤–∏–¥–∫–∏–π –æ–≥–ª—è–¥ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –∑–∞–ø–∏—Å—ñ–≤</li>
                <li><strong>–ï–∫—Å–ø–æ—Ä—Ç –≤ Excel:</strong> –ü–æ–≤–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É</li>
                <li><strong>–ü–æ–∫—Ä–∞—â–µ–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏:</strong> –ë—ñ–ª—å—à–µ –æ–ø—Ü—ñ–π –¥–ª—è –ø–æ—à—É–∫—É —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó</li>
            </ul>
        </field>
    </record>
</odoo>